<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Schedule — {{ token.company_name }}</title>
    <link rel="stylesheet" href="/static/css/style.css?v={{ cache_bust }}">
</head>
<body>
    <div class="timekeeper-container">
        <div class="timekeeper-header">
            {% if token.logo_file %}
            <div class="header-row">
                <img src="/static/logos/{{ token.logo_file }}" alt="{{ token.company_name }}" class="company-logo">
                <div class="header-text">
                    <h1>{{ token.company_name }}</h1>
                    <span style="font-size: 16px; color: var(--gray-500);">Your Schedule</span>
                </div>
            </div>
            {% else %}
            <h1>{{ token.company_name }}</h1>
            <span style="font-size: 16px; color: var(--gray-500);">Your Schedule</span>
            {% endif %}
            <a href="/help?token={{ token.token }}" target="_blank" class="help-link">Help</a>
        </div>

        <div class="tk-section" style="display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: #fff; border: 1px solid var(--gray-200); border-radius: 8px;">
            <span style="font-weight: 600; color: var(--gray-800);">{{ employee.name }}</span>
            <a href="/c/{{ token.token }}" class="back-to-home">Back to Home</a>
        </div>

        <h2 style="margin-top: 24px; margin-bottom: 16px;">Your Upcoming Schedule</h2>

        {% if schedules %}
        <div class="schedule-list">
            {% for s in schedules %}
            <div class="meta-card" style="margin-bottom: 12px; padding: 16px;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 8px;">
                    <div>
                        <strong style="font-size: 16px;">{{ s.date|monthday }}</strong>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-weight: 700; font-size: 16px; color: var(--gray-800);">{{ s.date|weekday }}</div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 6px;">
                    <span class="badge badge-active">{{ s.start_time|time12 }} - {{ s.end_time|time12 }}</span>
                </div>
                <div style="margin-top: 8px;">
                    <strong>{{ s.job_name }}</strong>
                    {% if s.job_address %}
                    <a href="https://maps.apple.com/?q={{ s.job_address|urlencode }}" style="color: var(--blue); font-size: 13px; text-decoration: underline;"> — {{ s.job_address }}</a>
                    {% endif %}
                </div>
                {% if s.notes %}
                <p style="color: var(--gray-500); font-size: 13px; margin-top: 6px; margin-bottom: 0; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; word-break: break-word; cursor: pointer;"
                   onclick="this.style.webkitLineClamp = this.style.webkitLineClamp === 'unset' ? '3' : 'unset'">{{ s.notes }}</p>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div style="text-align: center; padding: 32px; color: var(--gray-500);">
            <p>No upcoming shifts scheduled.</p>
            <p style="font-size: 14px;">Check back later or contact your supervisor.</p>
        </div>
        {% endif %}
    </div>
    {% include '_footer.html' %}
</body>
</html>
